# DESIRED STATE CONFIGURATION

- DSC is heavily tilted towards server management rather than client management

- DSC is an attempt by Microsoft to provide declarative configuration management in standard-based fashion. With a declarative configuration you give a computer a description of what you want that computer to look like. You don't worry about how it gets that way- you tell it what you want. That's different from the imperative configuration, where you write a script that makes whatever changes necessary to make a computer look the way you want

- The configuration script is the declarative statement of what you want your computer to look like. DSC compiles that script into a Managed Object Format (MOF) file

- A MOF File is a text-based file that represents information in the Common Information Model (CIM), an open standard managed by the Distributed Management Task Force (DTMF). The MOF file is then deployed to the computers that you want it to apply to - either a computer can pull the MOD file from a URL, or you can push the MOF file to the computer in a one-time operation. It is also possible to pull the MOF file from a SMB share but most people use a URL. Once the computer has the MOF file, DSC evaluates it on a schedule. If you pushed the file, that's every 15 minutes by default - if you have the computer pulling the file, it'll check every 30 minutes. That runs as a Windows Scheduled task

- The DTMF is an industry working group, meaning we are working in the world of open standards that can work across platforms

- When the computer evaluates the MOF file, DSC resources come into play. Each resource is, a PowerShell module that implements three functions:
  - Capable of installing roles and features will load up
  - Determine whether the computer meets the criteria
  - Install the required role
- A Resource has the ability to test a configuration element as well as remediate it, or set it to a specific state (such as installed or not installed)

- The usefullness of DSC depends on the availability of resources that can configure whatever it is you need. You don't need to deploy resources once you get them. Just as a computer can pull its MOF from a URL, DSC knows how to check a URL for resources that's missing. It can download them - as zip files, which it knows how to uncompress - and installs them locally when it needs them. That means you get the desired MOF to your computers, and they'll take care of the rest, including grabbing any DSC resources referenced by those MOFs

- Microsoft chose this PowerShell-to-MOF conversion, rather than simply letting DSC use a PowerShell script directly because it is trying hard to play better with others in the datacenter. The protocol used by PowerShell Remoting, WSManagement, is an open standard, and in theory you can use Remoting to sends commands to a Linux box or an IBM AS/400, assuming someone had implemented the protocol on those operating systems. And someone could do that, if they wanted, without violating any Microsoft patents or others intelluctual property - This is an "Open Standard". You can write configuration script in PowerShell, turn it into a MOF and send it to a Linux machine, provided you are using DSC through WMF 5.0 and have loaded the appropriate packages on your Linux machine

- DSC can consume a MOF generated by something other than PowerShell which means you could potentially use non-Microsoft, cross-platform software to generated MOFs and send them to a Windows computer, and DSC could follow the instructions in that MOF to configure the computer

- The investment in MOF is all about enabling better cross-platform management of hetergeneous datacenters

```powershell
Configuration IISWebsite {
  Node @("Server1", "Server2") {
    WindowsFeature IIS {
      Ensure = "Present"
      Name   = "Web-Server"
    }

    WindowsFeature ASP {
      Ensure = "Present"
      Name   = "Web-Asp-Net45"
    }
  }
}
```

- Group Policy is still the winner for client configuration. Clients typically belong to the domain, and Group Policy depends on the domain to target computers and apply policy. Client computers move around a lot - they are laptops, they get reassigned, their users relocate, and so on. Group Policy is built to understand that, and it has flexible options for applying policy to various computers based on detailed criteria
  - Servers are static - they don't move around much, and we don't reassign them much. Servers tend to live in one place, and we know about every single one of them. Servers are less likely to belong to a domain than a client machine, because there are numerous scenarios - think public web servers - where belonging to a domain is impractical. DSC has no dependency on domain - as long as you can communicate with a server it'll work, and those communications can be configured to work across domain and workgroup boundaries
  - So DSC is focused on server, specially mass-scale environments like cloud hosting providers
